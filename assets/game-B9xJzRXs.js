import"./modulepreload-polyfill-B5Qt9EMX.js";console.log("Loading Portfolio Drift Racing Game - VERSION 3.0");class m{constructor(){console.log("Portfolio Drift Game starting..."),this.initialized=!1,this.loading=!0,this.projectsCollected=0,this.skillsCollected=0,this.experienceCollected=0,this.totalCollectibles=15,this.score=0,this.speed=0,this.drift=!1,this.driftScore=0,this.carSpeed=0,this.maxSpeed=.8,this.acceleration=.02,this.friction=.95,this.turnSpeed=.03,this.driftFactor=.9,this.keys={accelerate:!1,brake:!1,left:!1,right:!1,handbrake:!1},this.portfolioData={projects:[{name:"AvukatLLM",tech:"AI/ML",points:100,color:16739179},{name:"GoDash",tech:"Go",points:80,color:5164484},{name:"MyYDS",tech:"React",points:90,color:4569041},{name:"TYT Platform",tech:"PWA",points:85,color:9883316},{name:"LinkedHU",tech:"Node.js",points:75,color:16771751}],skills:[{name:"JavaScript",level:90,color:15965202},{name:"Python",level:85,color:3447003},{name:"React",level:80,color:6413051},{name:"Three.js",level:75,color:0},{name:"AI/ML",level:85,color:15158332}],experiences:[{company:"Binary Brain Technology",role:"Software Intern",points:150,color:10181046},{company:"TellUS",role:"Software Intern",points:120,color:3426654},{company:"Hacettepe University",role:"Student",points:100,color:3066993}]},this.collectibles=[],this.init()}async init(){console.log("Initializing Portfolio Drift Game...");try{this.setupScene(),await this.loadAssets(),this.createWorld(),this.createCar(),this.createCollectibles(),this.setupControls(),this.setupUI(),this.hideLoadingScreen(),this.showWelcomeDialog(),this.gameLoop(),this.initialized=!0,console.log("Portfolio Drift Game successfully initialized!")}catch(e){console.error("Game initialization error:",e),this.showError(e.message)}}setupScene(){console.log("Setting up 3D scene..."),this.scene=new THREE.Scene,this.scene.background=new THREE.Color(8900331),this.scene.fog=new THREE.Fog(8900331,50,200),this.camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3),this.camera.position.set(0,10,15),this.renderer=new THREE.WebGLRenderer({antialias:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=THREE.PCFSoftShadowMap,document.getElementById("game-container").appendChild(this.renderer.domElement);const e=new THREE.AmbientLight(16777215,.6);this.scene.add(e);const t=new THREE.DirectionalLight(16777215,.8);t.position.set(50,100,50),t.castShadow=!0,t.shadow.mapSize.width=2048,t.shadow.mapSize.height=2048,t.shadow.camera.near=.5,t.shadow.camera.far=500,t.shadow.camera.left=-100,t.shadow.camera.right=100,t.shadow.camera.top=100,t.shadow.camera.bottom=-100,this.scene.add(t),window.addEventListener("resize",()=>{this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)})}async loadAssets(){return new Promise(e=>{console.log("Loading game assets..."),setTimeout(()=>{e()},1500)})}createWorld(){console.log("Creating race track world...");const e=new THREE.PlaneGeometry(200,200),t=new THREE.MeshLambertMaterial({color:3355443,transparent:!0,opacity:.8});this.track=new THREE.Mesh(e,t),this.track.rotation.x=-Math.PI/2,this.track.receiveShadow=!0,this.scene.add(this.track),this.createTrackBorders(),this.createBuildings()}createTrackBorders(){const e=new THREE.MeshLambertMaterial({color:16729943}),t=[],o=80,s=32;for(let i=0;i<s;i++){const a=i/s*Math.PI*2,r=Math.cos(a)*o,n=Math.sin(a)*o;t.push({x:r,z:n})}t.forEach((i,a)=>{const r=new THREE.Mesh(new THREE.BoxGeometry(4,3,4),e);r.position.set(i.x,1.5,i.z),r.castShadow=!0,this.scene.add(r)})}createBuildings(){const e=[new THREE.MeshLambertMaterial({color:7101671}),new THREE.MeshLambertMaterial({color:10656766}),new THREE.MeshLambertMaterial({color:7649791}),new THREE.MeshLambertMaterial({color:623843})];for(let t=0;t<20;t++){const o=new THREE.Mesh(new THREE.BoxGeometry(Math.random()*8+4,Math.random()*15+5,Math.random()*8+4),e[Math.floor(Math.random()*e.length)]),s=Math.random()*Math.PI*2,i=100+Math.random()*50;o.position.set(Math.cos(s)*i,o.geometry.parameters.height/2,Math.sin(s)*i),o.castShadow=!0,this.scene.add(o)}}createCar(){console.log("Creating player car..."),this.car=new THREE.Group;const e=new THREE.BoxGeometry(4,1,8),t=new THREE.MeshLambertMaterial({color:14774357}),o=new THREE.Mesh(e,t);o.position.y=.5,o.castShadow=!0,this.car.add(o);const s=new THREE.BoxGeometry(3,1,4),i=new THREE.MeshLambertMaterial({color:2962486}),a=new THREE.Mesh(s,i);a.position.y=1.5,a.castShadow=!0,this.car.add(a);const r=new THREE.CylinderGeometry(.8,.8,.5),n=new THREE.MeshLambertMaterial({color:2962486}),l=[{x:-1.8,z:2.5},{x:1.8,z:2.5},{x:-1.8,z:-2.5},{x:1.8,z:-2.5}];this.wheels=[],l.forEach((d,p)=>{const c=new THREE.Mesh(r,n);c.position.set(d.x,0,d.z),c.rotation.z=Math.PI/2,c.castShadow=!0,this.car.add(c),this.wheels.push(c)}),this.car.position.set(0,0,0),this.carVelocity=new THREE.Vector3(0,0,0),this.carDirection=0,this.scene.add(this.car)}createCollectibles(){console.log("Creating portfolio collectibles..."),this.portfolioData.projects.forEach((e,t)=>{const o=this.createCollectible(e.name,e.tech,e.color,"project",e.points),s=t/this.portfolioData.projects.length*Math.PI*2,i=30;o.position.set(Math.cos(s)*i,2,Math.sin(s)*i),this.collectibles.push(o),this.scene.add(o)}),this.portfolioData.skills.forEach((e,t)=>{const o=this.createCollectible(e.name,`${e.level}%`,e.color,"skill",e.level),s=t/this.portfolioData.skills.length*Math.PI*2,i=15;o.position.set(Math.cos(s)*i,2,Math.sin(s)*i),this.collectibles.push(o),this.scene.add(o)}),this.portfolioData.experiences.forEach((e,t)=>{const o=this.createCollectible(e.company,e.role,e.color,"experience",e.points),s=t/this.portfolioData.experiences.length*Math.PI*2,i=50;o.position.set(Math.cos(s)*i,2,Math.sin(s)*i),this.collectibles.push(o),this.scene.add(o)})}createCollectible(e,t,o,s,i){const a=new THREE.Group,r=new THREE.OctahedronGeometry(1.5),n=new THREE.MeshLambertMaterial({color:o,emissive:o,emissiveIntensity:.3}),l=new THREE.Mesh(r,n);return l.castShadow=!0,a.add(l),a.userData={name:e,subtitle:t,type:s,points:i,collected:!1,originalY:2,floatOffset:Math.random()*Math.PI*2},a}setupControls(){console.log("Setting up car controls..."),window.addEventListener("keydown",e=>{switch(e.key.toLowerCase()){case"w":case"arrowup":this.keys.accelerate=!0;break;case"s":case"arrowdown":this.keys.brake=!0;break;case"a":case"arrowleft":this.keys.left=!0;break;case"d":case"arrowright":this.keys.right=!0;break;case" ":this.keys.handbrake=!0,e.preventDefault();break;case"escape":this.toggleMenu();break}}),window.addEventListener("keyup",e=>{switch(e.key.toLowerCase()){case"w":case"arrowup":this.keys.accelerate=!1;break;case"s":case"arrowdown":this.keys.brake=!1;break;case"a":case"arrowleft":this.keys.left=!1;break;case"d":case"arrowright":this.keys.right=!1;break;case" ":this.keys.handbrake=!1;break}})}setupUI(){this.updateUI(),document.getElementById("dialog-continue").addEventListener("click",()=>{this.hideDialog()}),document.getElementById("menu-button").addEventListener("click",()=>{this.toggleMenu()}),document.getElementById("close-menu").addEventListener("click",()=>{this.toggleMenu()}),document.getElementById("restart-button").addEventListener("click",()=>{window.location.reload()}),document.getElementById("back-to-portfolio").addEventListener("click",()=>{window.location.href="index.html"})}updateCarPhysics(){this.keys.accelerate?this.carSpeed=Math.min(this.carSpeed+this.acceleration,this.maxSpeed):this.keys.brake?this.carSpeed=Math.max(this.carSpeed-this.acceleration*2,-this.maxSpeed*.5):this.carSpeed*=this.friction,this.keys.left&&Math.abs(this.carSpeed)>.01&&(this.carDirection+=this.turnSpeed*(this.carSpeed>0?1:-1)),this.keys.right&&Math.abs(this.carSpeed)>.01&&(this.carDirection-=this.turnSpeed*(this.carSpeed>0?1:-1)),this.keys.handbrake&&Math.abs(this.carSpeed)>.2?(this.drift=!0,this.carSpeed*=.9,this.driftScore+=Math.abs(this.carSpeed)*10):this.drift=!1,this.carVelocity.x=Math.sin(this.carDirection)*this.carSpeed,this.carVelocity.z=Math.cos(this.carDirection)*this.carSpeed,this.drift&&this.carVelocity.multiplyScalar(this.driftFactor),this.car.position.add(this.carVelocity),this.car.rotation.y=this.carDirection,this.wheels.forEach(e=>{e.rotation.x+=this.carSpeed*2}),this.speed=Math.abs(this.carSpeed)*100,document.getElementById("code-fragments").textContent=Math.floor(this.speed)}checkCollisions(){this.collectibles.forEach((o,s)=>{o.userData.collected||this.car.position.distanceTo(o.position)<3&&this.collectItem(o,s)});const e=90;if(Math.sqrt(this.car.position.x**2+this.car.position.z**2)>e){const o=Math.atan2(this.car.position.z,this.car.position.x);this.car.position.x=Math.cos(o)*e,this.car.position.z=Math.sin(o)*e,this.carSpeed*=.5}}collectItem(e,t){switch(e.userData.collected=!0,e.scale.set(0,0,0),this.score+=e.userData.points,e.userData.type){case"project":this.projectsCollected++;break;case"skill":this.skillsCollected++;break;case"experience":this.experienceCollected++;break}this.showCollectionDialog(e.userData),this.updateUI(),this.projectsCollected+this.skillsCollected+this.experienceCollected>=this.totalCollectibles&&setTimeout(()=>{this.showVictoryDialog()},2e3)}updateUI(){const e=this.projectsCollected+this.skillsCollected+this.experienceCollected,t=e/this.totalCollectibles*100;document.getElementById("progress-fill").style.width=`${t}%`;const o=document.getElementById("code-fragments");o&&(o.textContent=`${e}/${this.totalCollectibles}`)}animateCollectibles(){this.collectibles.forEach(e=>{e.userData.collected||(e.position.y=e.userData.originalY+Math.sin(Date.now()*.003+e.userData.floatOffset)*.5,e.rotation.y+=.02,e.rotation.x+=.01)})}updateCamera(){const e=new THREE.Vector3(0,8,12);e.applyAxisAngle(new THREE.Vector3(0,1,0),this.carDirection);const t=this.car.position.clone().add(e);this.camera.position.lerp(t,.1),this.camera.lookAt(this.car.position)}showCollectionDialog(e){const t=document.getElementById("story-dialog"),o=document.getElementById("dialog-title"),s=document.getElementById("dialog-text");o.textContent=`${e.name} Toplandı!`;let i="";switch(e.type){case"project":i=`${e.name} projesi toplandı! Teknoloji: ${e.subtitle}. Bu proje portfolio deneyimimin önemli bir parçası.`;break;case"skill":i=`${e.name} yeteneği toplandı! Seviye: ${e.subtitle}. Bu teknolojide güçlü deneyimim var.`;break;case"experience":i=`${e.name} deneyimi toplandı! Pozisyon: ${e.subtitle}. Bu deneyim kariyerimde önemli bir adım.`;break}s.textContent=i,t.classList.remove("hidden"),setTimeout(()=>{this.hideDialog()},3e3)}showWelcomeDialog(){const e=document.getElementById("story-dialog"),t=document.getElementById("dialog-title"),o=document.getElementById("dialog-text");t.textContent="Portfolio Drift Racing'e Hoş Geldin!",o.textContent="Merhaba! Ben Eyüp Zafer ÜNAL. Bu oyunda arabamla drift atarak CV'mdeki projeleri, yetenekleri ve deneyimleri toplamalısın. WASD ile sür, SPACE ile drift yap!",e.classList.remove("hidden")}showVictoryDialog(){const e=document.getElementById("story-dialog"),t=document.getElementById("dialog-title"),o=document.getElementById("dialog-text");t.textContent="Tebrikler! 🎉",o.textContent=`Tüm portfolio öğelerini topladın! Toplam skor: ${this.score} puan. Drift skoru: ${Math.floor(this.driftScore)}. Artık portfolyoma göz atabilirsin!`,e.classList.remove("hidden")}hideDialog(){document.getElementById("story-dialog").classList.add("hidden")}toggleMenu(){document.getElementById("menu-panel").classList.toggle("hidden")}hideLoadingScreen(){const e=document.getElementById("loading-screen");e.style.opacity="0",setTimeout(()=>{e.style.display="none",this.loading=!1},500)}showError(e){const t=document.getElementById("loading-screen");t&&(t.innerHTML=`
                <div class="loading-content">
                    <p style="color: #f50057; font-size: 18px;">Hata: ${e}</p>
                    <button onclick="window.location.reload()" 
                            style="margin-top: 15px; padding: 8px 16px; background: #f50057; 
                                   color: white; border: none; border-radius: 4px; cursor: pointer;">
                        Yeniden Yükle
                    </button>
                </div>
            `)}gameLoop(){const e=()=>{this.initialized&&!this.loading&&(this.updateCarPhysics(),this.checkCollisions(),this.animateCollectibles(),this.updateCamera()),this.renderer.render(this.scene,this.camera),requestAnimationFrame(e)};e()}}document.addEventListener("DOMContentLoaded",()=>{console.log("DOM loaded, initializing Portfolio Drift Game..."),setTimeout(()=>{try{window.gameInstance=new m}catch(h){console.error("Failed to initialize game:",h),alert("Portfolio Drift oyunu başlatılamadı: "+h.message)}},500)});console.log("Portfolio Drift Game.js file successfully loaded");
